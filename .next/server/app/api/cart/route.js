"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/cart/route";
exports.ids = ["app/api/cart/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.ts&appDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.ts&appDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_munis_Downloads_tedlighting_website_2026_main_tedlighting_website_2026_main_app_api_cart_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/cart/route.ts */ \"(rsc)/./app/api/cart/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/cart/route\",\n        pathname: \"/api/cart\",\n        filename: \"route\",\n        bundlePath: \"app/api/cart/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\munis\\\\Downloads\\\\tedlighting-website-2026-main\\\\tedlighting-website-2026-main\\\\app\\\\api\\\\cart\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_munis_Downloads_tedlighting_website_2026_main_tedlighting_website_2026_main_app_api_cart_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/cart/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjYXJ0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjYXJ0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2FydCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtdW5pcyU1Q0Rvd25sb2FkcyU1Q3RlZGxpZ2h0aW5nLXdlYnNpdGUtMjAyNi1tYWluJTVDdGVkbGlnaHRpbmctd2Vic2l0ZS0yMDI2LW1haW4lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q211bmlzJTVDRG93bmxvYWRzJTVDdGVkbGlnaHRpbmctd2Vic2l0ZS0yMDI2LW1haW4lNUN0ZWRsaWdodGluZy13ZWJzaXRlLTIwMjYtbWFpbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUU7QUFDaEo7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZWRsaWdodGluZy13ZWJzaXRlLW5leHRqcy8/NTNmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxtdW5pc1xcXFxEb3dubG9hZHNcXFxcdGVkbGlnaHRpbmctd2Vic2l0ZS0yMDI2LW1haW5cXFxcdGVkbGlnaHRpbmctd2Vic2l0ZS0yMDI2LW1haW5cXFxcYXBwXFxcXGFwaVxcXFxjYXJ0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYXJ0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2FydFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2FydC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXG11bmlzXFxcXERvd25sb2Fkc1xcXFx0ZWRsaWdodGluZy13ZWJzaXRlLTIwMjYtbWFpblxcXFx0ZWRsaWdodGluZy13ZWJzaXRlLTIwMjYtbWFpblxcXFxhcHBcXFxcYXBpXFxcXGNhcnRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NhcnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.ts&appDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/cart/route.ts":
/*!*******************************!*\
  !*** ./app/api/cart/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(rsc)/./lib/mongodb.ts\");\n/* harmony import */ var _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/models/Cart */ \"(rsc)/./lib/models/Cart.ts\");\n\n\n\nasync function GET(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const sessionId = searchParams.get(\"sessionId\");\n        if (!sessionId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        let cart = await _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n            sessionId\n        });\n        if (!cart) {\n            cart = new _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n                sessionId,\n                items: [],\n                total: 0\n            });\n            await cart.save();\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            items: cart.items,\n            total: cart.total\n        });\n    } catch (error) {\n        console.error(\"Error fetching cart:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { sessionId, productId, quantity, price, name, image } = await request.json();\n        if (!sessionId || !productId || !quantity || !price) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        let cart = await _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n            sessionId\n        });\n        if (!cart) {\n            cart = new _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n                sessionId,\n                items: [],\n                total: 0\n            });\n        }\n        const existingItemIndex = cart.items.findIndex((item)=>item.productId === productId);\n        if (existingItemIndex > -1) {\n            cart.items[existingItemIndex].quantity += quantity;\n        } else {\n            cart.items.push({\n                productId,\n                quantity,\n                price,\n                name,\n                image\n            });\n        }\n        cart.total = cart.items.reduce((sum, item)=>sum + item.price * item.quantity, 0);\n        await cart.save();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            items: cart.items,\n            total: cart.total\n        });\n    } catch (error) {\n        console.error(\"Error adding to cart:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { sessionId, productId, quantity } = await request.json();\n        if (!sessionId || !productId || quantity === undefined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        const cart = await _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n            sessionId\n        });\n        if (!cart) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Cart not found\"\n            }, {\n                status: 404\n            });\n        }\n        const itemIndex = cart.items.findIndex((item)=>item.productId === productId);\n        if (itemIndex > -1) {\n            if (quantity <= 0) {\n                cart.items.splice(itemIndex, 1);\n            } else {\n                cart.items[itemIndex].quantity = quantity;\n            // Preserve name and image when updating quantity\n            }\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Item not found in cart\"\n            }, {\n                status: 404\n            });\n        }\n        cart.total = cart.items.reduce((sum, item)=>sum + item.price * item.quantity, 0);\n        await cart.save();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            items: cart.items,\n            total: cart.total\n        });\n    } catch (error) {\n        console.error(\"Error updating cart:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const sessionId = searchParams.get(\"sessionId\");\n        const productId = searchParams.get(\"productId\");\n        if (!sessionId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const cart = await _lib_models_Cart__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n            sessionId\n        });\n        if (!cart) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Cart not found\"\n            }, {\n                status: 404\n            });\n        }\n        if (productId) {\n            // Remove specific item\n            cart.items = cart.items.filter((item)=>item.productId !== productId);\n        } else {\n            // Clear entire cart\n            cart.items = [];\n        }\n        cart.total = cart.items.reduce((sum, item)=>sum + item.price * item.quantity, 0);\n        await cart.save();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            items: cart.items,\n            total: cart.total\n        });\n    } catch (error) {\n        console.error(\"Error removing from cart:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0ksSUFBSTtRQUVmLE9BQU9qQixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3ZCSyxPQUFPRixLQUFLRSxLQUFLO1lBQ2pCQyxPQUFPSCxLQUFLRyxLQUFLO1FBQ25CO0lBQ0YsRUFBRSxPQUFPTCxPQUFPO1FBQ2RPLFFBQVFQLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9YLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUM3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVkbGlnaHRpbmctd2Vic2l0ZS1uZXh0anMvLi9hcHAvYXBpL2NhcnQvcm91dGUudHM/YzIxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJy4uLy4uLy4uL2xpYi9tb25nb2RiJztcclxuaW1wb3J0IENhcnQgZnJvbSAnLi4vLi4vLi4vbGliL21vZGVscy9DYXJ0JztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XHJcblxyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3Qgc2Vzc2lvbklkID0gc2VhcmNoUGFyYW1zLmdldCgnc2Vzc2lvbklkJyk7XHJcblxyXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdTZXNzaW9uIElEIGlzIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjYXJ0ID0gYXdhaXQgQ2FydC5maW5kT25lKHsgc2Vzc2lvbklkIH0pO1xyXG5cclxuICAgIGlmICghY2FydCkge1xyXG4gICAgICBjYXJ0ID0gbmV3IENhcnQoeyBzZXNzaW9uSWQsIGl0ZW1zOiBbXSwgdG90YWw6IDAgfSk7XHJcbiAgICAgIGF3YWl0IGNhcnQuc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIGl0ZW1zOiBjYXJ0Lml0ZW1zLFxyXG4gICAgICB0b3RhbDogY2FydC50b3RhbCxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXJ0OicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XHJcblxyXG4gICAgY29uc3QgeyBzZXNzaW9uSWQsIHByb2R1Y3RJZCwgcXVhbnRpdHksIHByaWNlLCBuYW1lLCBpbWFnZSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcblxyXG4gICAgaWYgKCFzZXNzaW9uSWQgfHwgIXByb2R1Y3RJZCB8fCAhcXVhbnRpdHkgfHwgIXByaWNlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNhcnQgPSBhd2FpdCBDYXJ0LmZpbmRPbmUoeyBzZXNzaW9uSWQgfSk7XHJcblxyXG4gICAgaWYgKCFjYXJ0KSB7XHJcbiAgICAgIGNhcnQgPSBuZXcgQ2FydCh7IHNlc3Npb25JZCwgaXRlbXM6IFtdLCB0b3RhbDogMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBleGlzdGluZ0l0ZW1JbmRleCA9IGNhcnQuaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5wcm9kdWN0SWQgPT09IHByb2R1Y3RJZCk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nSXRlbUluZGV4ID4gLTEpIHtcclxuICAgICAgY2FydC5pdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0ucXVhbnRpdHkgKz0gcXVhbnRpdHk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYXJ0Lml0ZW1zLnB1c2goeyBwcm9kdWN0SWQsIHF1YW50aXR5LCBwcmljZSwgbmFtZSwgaW1hZ2UgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FydC50b3RhbCA9IGNhcnQuaXRlbXMucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5LCAwKTtcclxuXHJcbiAgICBhd2FpdCBjYXJ0LnNhdmUoKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBpdGVtczogY2FydC5pdGVtcyxcclxuICAgICAgdG90YWw6IGNhcnQudG90YWwsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIHRvIGNhcnQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xyXG5cclxuICAgIGNvbnN0IHsgc2Vzc2lvbklkLCBwcm9kdWN0SWQsIHF1YW50aXR5IH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICBpZiAoIXNlc3Npb25JZCB8fCAhcHJvZHVjdElkIHx8IHF1YW50aXR5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgQ2FydC5maW5kT25lKHsgc2Vzc2lvbklkIH0pO1xyXG5cclxuICAgIGlmICghY2FydCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0NhcnQgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IGNhcnQuaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5wcm9kdWN0SWQgPT09IHByb2R1Y3RJZCk7XHJcblxyXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XHJcbiAgICAgIGlmIChxdWFudGl0eSA8PSAwKSB7XHJcbiAgICAgICAgY2FydC5pdGVtcy5zcGxpY2UoaXRlbUluZGV4LCAxKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjYXJ0Lml0ZW1zW2l0ZW1JbmRleF0ucXVhbnRpdHkgPSBxdWFudGl0eTtcclxuICAgICAgICAvLyBQcmVzZXJ2ZSBuYW1lIGFuZCBpbWFnZSB3aGVuIHVwZGF0aW5nIHF1YW50aXR5XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSXRlbSBub3QgZm91bmQgaW4gY2FydCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYXJ0LnRvdGFsID0gY2FydC5pdGVtcy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHksIDApO1xyXG5cclxuICAgIGF3YWl0IGNhcnQuc2F2ZSgpO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIGl0ZW1zOiBjYXJ0Lml0ZW1zLFxyXG4gICAgICB0b3RhbDogY2FydC50b3RhbCxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjYXJ0OicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcclxuXHJcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XHJcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZXNzaW9uSWQnKTtcclxuICAgIGNvbnN0IHByb2R1Y3RJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3Byb2R1Y3RJZCcpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvbklkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU2Vzc2lvbiBJRCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjYXJ0ID0gYXdhaXQgQ2FydC5maW5kT25lKHsgc2Vzc2lvbklkIH0pO1xyXG5cclxuICAgIGlmICghY2FydCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0NhcnQgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcm9kdWN0SWQpIHtcclxuICAgICAgLy8gUmVtb3ZlIHNwZWNpZmljIGl0ZW1cclxuICAgICAgY2FydC5pdGVtcyA9IGNhcnQuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5wcm9kdWN0SWQgIT09IHByb2R1Y3RJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDbGVhciBlbnRpcmUgY2FydFxyXG4gICAgICBjYXJ0Lml0ZW1zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgY2FydC50b3RhbCA9IGNhcnQuaXRlbXMucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5LCAwKTtcclxuXHJcbiAgICBhd2FpdCBjYXJ0LnNhdmUoKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBpdGVtczogY2FydC5pdGVtcyxcclxuICAgICAgdG90YWw6IGNhcnQudG90YWwsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVtb3ZpbmcgZnJvbSBjYXJ0OicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGJDb25uZWN0IiwiQ2FydCIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJzZXNzaW9uSWQiLCJnZXQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjYXJ0IiwiZmluZE9uZSIsIml0ZW1zIiwidG90YWwiLCJzYXZlIiwiY29uc29sZSIsIlBPU1QiLCJwcm9kdWN0SWQiLCJxdWFudGl0eSIsInByaWNlIiwibmFtZSIsImltYWdlIiwiZXhpc3RpbmdJdGVtSW5kZXgiLCJmaW5kSW5kZXgiLCJpdGVtIiwicHVzaCIsInJlZHVjZSIsInN1bSIsIlBVVCIsInVuZGVmaW5lZCIsIml0ZW1JbmRleCIsInNwbGljZSIsIkRFTEVURSIsImZpbHRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/cart/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/Cart.ts":
/*!****************************!*\
  !*** ./lib/models/Cart.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CartItemSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    productId: {\n        type: String,\n        required: true\n    },\n    quantity: {\n        type: Number,\n        required: true,\n        min: 1\n    },\n    price: {\n        type: Number,\n        required: true\n    },\n    name: {\n        type: String\n    },\n    image: {\n        type: String\n    }\n});\nconst CartSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    sessionId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    items: [\n        CartItemSchema\n    ],\n    total: {\n        type: Number,\n        default: 0\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Cart || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Cart\", CartSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9kZWxzL0NhcnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBa0JoQyxNQUFNQyxpQkFBaUIsSUFBSUQsd0RBQWUsQ0FBQztJQUN6Q0csV0FBVztRQUNUQyxNQUFNQztRQUNOQyxVQUFVO0lBQ1o7SUFDQUMsVUFBVTtRQUNSSCxNQUFNSTtRQUNORixVQUFVO1FBQ1ZHLEtBQUs7SUFDUDtJQUNBQyxPQUFPO1FBQ0xOLE1BQU1JO1FBQ05GLFVBQVU7SUFDWjtJQUNBSyxNQUFNO1FBQ0pQLE1BQU1DO0lBQ1I7SUFDQU8sT0FBTztRQUNMUixNQUFNQztJQUNSO0FBQ0Y7QUFFQSxNQUFNUSxhQUFhLElBQUliLHdEQUFlLENBQ3BDO0lBQ0VjLFdBQVc7UUFDVFYsTUFBTUM7UUFDTkMsVUFBVTtRQUNWUyxRQUFRO0lBQ1Y7SUFDQUMsT0FBTztRQUFDZjtLQUFlO0lBQ3ZCZ0IsT0FBTztRQUNMYixNQUFNSTtRQUNOVSxTQUFTO0lBQ1g7QUFDRixHQUNBO0lBQ0VDLFlBQVk7QUFDZDtBQUtGLGlFQUFlbkIsd0RBQWUsQ0FBQ3FCLElBQUksSUFBSXJCLHFEQUFjLENBQVEsUUFBUWEsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RlZGxpZ2h0aW5nLXdlYnNpdGUtbmV4dGpzLy4vbGliL21vZGVscy9DYXJ0LnRzP2EyYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmludGVyZmFjZSBJQ2FydEl0ZW0ge1xyXG4gIHByb2R1Y3RJZDogc3RyaW5nO1xyXG4gIHF1YW50aXR5OiBudW1iZXI7XHJcbiAgcHJpY2U6IG51bWJlcjtcclxuICBuYW1lPzogc3RyaW5nO1xyXG4gIGltYWdlPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSUNhcnQge1xyXG4gIHNlc3Npb25JZDogc3RyaW5nO1xyXG4gIGl0ZW1zOiBJQ2FydEl0ZW1bXTtcclxuICB0b3RhbDogbnVtYmVyO1xyXG4gIGNyZWF0ZWRBdD86IERhdGU7XHJcbiAgdXBkYXRlZEF0PzogRGF0ZTtcclxufVxyXG5cclxuY29uc3QgQ2FydEl0ZW1TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBwcm9kdWN0SWQ6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gIH0sXHJcbiAgcXVhbnRpdHk6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgbWluOiAxLFxyXG4gIH0sXHJcbiAgcHJpY2U6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gIH0sXHJcbiAgbmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gIH0sXHJcbiAgaW1hZ2U6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IENhcnRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hPElDYXJ0PihcclxuICB7XHJcbiAgICBzZXNzaW9uSWQ6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgdW5pcXVlOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGl0ZW1zOiBbQ2FydEl0ZW1TY2hlbWFdLFxyXG4gICAgdG90YWw6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICBkZWZhdWx0OiAwLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIHRpbWVzdGFtcHM6IHRydWUsXHJcbiAgfVxyXG4pO1xyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQ2FydCB8fCBtb25nb29zZS5tb2RlbDxJQ2FydD4oJ0NhcnQnLCBDYXJ0U2NoZW1hKTtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ2FydEl0ZW1TY2hlbWEiLCJTY2hlbWEiLCJwcm9kdWN0SWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJxdWFudGl0eSIsIk51bWJlciIsIm1pbiIsInByaWNlIiwibmFtZSIsImltYWdlIiwiQ2FydFNjaGVtYSIsInNlc3Npb25JZCIsInVuaXF1ZSIsIml0ZW1zIiwidG90YWwiLCJkZWZhdWx0IiwidGltZXN0YW1wcyIsIm1vZGVscyIsIkNhcnQiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Cart.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>mongoose);\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQ1I7QUFFSjtBQVFBLElBQUlDLFNBQVNDLE9BQU9OLFFBQVE7QUFFNUIsSUFBSSxDQUFDSyxRQUFRO0lBQ1hBLFNBQVNDLE9BQU9OLFFBQVEsR0FBRztRQUFFTyxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUN6RDtBQUVBLGVBQWVDO0lBQ2IsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2YsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLE1BQU1FLE9BQU87WUFBRUMsZ0JBQWdCO1FBQU07UUFDckNOLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFTLE1BQU1HLElBQUksQ0FBQyxDQUFDYixXQUFhQTtJQUMxRTtJQUVBLElBQUk7UUFDRkssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZULE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNTTtJQUNSO0lBRUEsT0FBT1QsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVkbGlnaHRpbmctd2Vic2l0ZS1uZXh0anMvLi9saWIvbW9uZ29kYi50cz8wNWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJITtcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAnUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUgaW5zaWRlIC5lbnYubG9jYWwnXHJcbiAgKTtcclxufVxyXG5cclxuLy8gQWRkIGdsb2JhbCB0eXBpbmcgZm9yIFRTXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXHJcbiAgdmFyIG1vbmdvb3NlOiB7IGNvbm46IG1vbmdvb3NlLk1vbmdvb3NlIHwgbnVsbDsgcHJvbWlzZTogUHJvbWlzZTxtb25nb29zZS5Nb25nb29zZT4gfCBudWxsIH07XHJcbn1cclxuXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XHJcblxyXG5pZiAoIWNhY2hlZCkge1xyXG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSB7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICBjb25zdCBvcHRzID0geyBidWZmZXJDb21tYW5kczogZmFsc2UgfTtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cykudGhlbigobW9uZ29vc2UpID0+IG1vbmdvb3NlKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcclxuICAgIHRocm93IGU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsImRiQ29ubmVjdCIsIm9wdHMiLCJidWZmZXJDb21tYW5kcyIsImNvbm5lY3QiLCJ0aGVuIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcart%2Froute&page=%2Fapi%2Fcart%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcart%2Froute.ts&appDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmunis%5CDownloads%5Ctedlighting-website-2026-main%5Ctedlighting-website-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();